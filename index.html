<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
    const jwt = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTAsImVtYWlsIjoiYWRtaW5AdXNlcmNlbnRyaWMuY29tLmF1Iiwicm9sZSI6ImFkbWluIiwiZmlyc3ROYW1lIjoiVXNlckNlbnRyaWMiLCJsYXN0TmFtZSI6IkZ1bmN0aW9uYWwgQWNjb3VudCIsInByb2Zlc3Npb24iOm51bGwsInZlcmlmaWVkIjpmYWxzZSwiaWF0IjoxNTk4NDk2Njg4fQ.cS8LFpAhWY8YLj-3RzHBvaZsUdyLr6ZhuXffOjcADHs';
    const urlProd = 'https://allocations.pmcv.com.au/candidate/104676/cv';
    // const url = 'https://bogvtax53g.execute-api.ap-southeast-2.amazonaws.com/dev/pdf?url=https://allocations.pmcv.com.au/referee/assessment?uuid=7137d96c-8b41-46e8-bbc6-a01c94b659f4';
    // const url = `https://bogvtax53g.execute-api.ap-southeast-2.amazonaws.com/dev/pdf?url=https://allocations.pmcv.com.au/candidate/102376/cv?pmcvtoken=${jwt}`;
    // const url = `http://localhost:3003/dev/pdf?jwt=${jwt}&url=${urlProd}`;
    const url = `http://localhost:3003/dev/pdf?jwt=${jwt}&url=https://allocations.pmcv.com.au/referee/assessment?uuid=c95f1d5b-8fa1-4055-b73b-2a9f8c57bb3f`;

    // const url = `http://localhost:3003/dev/pdf?url=https://allocations.pmcv.com.au/candidate/102376/cv?pmcvtoken=${jwt}`

    async function getPDF() {
        axios.get(url, {
            responseType: 'arraybuffer',
            headers: {
                'Accept': 'application/pdf',
            },
        }).then((response) => {
            const blob = new Blob([response.data], {type: 'application/pdf'})
            const link = document.createElement('a')
            link.href = window.URL.createObjectURL(blob)
            link.download = `test.pdf`
            link.click()
        });
    }

    // ab -n 10 -c 10 "https://allocations.pmcv.com.au/candidate/102376/cv?pmcvtoken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTAsImVtYWlsIjoiYWRtaW5AdXNlcmNlbnRyaWMuY29tLmF1Iiwicm9sZSI6ImFkbWluIiwiZmlyc3ROYW1lIjoiVXNlckNlbnRyaWMiLCJsYXN0TmFtZSI6IkZ1bmN0aW9uYWwgQWNjb3VudCIsInByb2Zlc3Npb24iOm51bGwsInZlcmlmaWVkIjpmYWxzZSwiaWF0IjoxNTk4NDExMTU1fQ.6Xa4rtXKoT3DLtERTaR1rEVzfZaQeZ1BNfkhu-47UTo"

    getPDF();
    // getPDF();
    // getPDF();
    // getPDF();
    // getPDF();
    // getPDF();
    // getPDF();
    // getPDF();
    // getPDF();
    // getPDF();
    // getPDF();
    // getPDF();
    // getPDF();
    // getPDF();
    // getPDF();
    // getPDF();
    // getPDF();
    // getPDF();
    // getPDF();
    // getPDF();
    // getPDF();
    // getPDF();
    // getPDF();
    // getPDF();
</script>